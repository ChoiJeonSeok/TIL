# 격리 수준(Isolation Level)

- 격리 수준은 데이터베이스 트랜잭션에서 매우 중요한 개념. 
- 동시에 여러 트랜잭션이 실행될 때, 각 트랜잭션의 독립성을 어느 정도까지 유지할지 결정한다. 
- 격리 수준을 설정함으로써, 트랜잭션 간의 간섭을 제어하고 데이터 무결성을 보장할 수 있다.

## 격리 수준의 종류

### 1. **READ UNCOMMITTED (읽기 미커밋)**:
   - 가장 낮은 격리 수준.
   - 다른 트랜잭션에서 아직 커밋되지 않은 변경사항을 읽을 수 있음(더티 리드).
   - 예시: 사용자 A가 금액을 변경하는 트랜잭션을 시작하지만 아직 커밋하지 않은 상태에서 사용자 B가 해당 금액을 조회할 수 있음.
   - 만약 A가 실패하여 롤백된다면 B는 실제로 존재하지 않는 잘못된 데이터를 기반으로 작업을 수행하게 되는 문제가 있음.

### 2. **READ COMMITTED (읽기 커밋)**:
   - 커밋된 데이터만 읽을 수 있는 격리 수준.
   - 다른 트랜잭션이 커밋한 후의 데이터만 볼 수 있음.
   - 예시: 사용자 A가 금액을 변경하고 커밋한 후에 사용자 B가 해당 금액을 조회하는 경우, B는 A의 변경사항을 볼 수 있음.
   - 더티 리드는 방지할 수 있지만, 팬텀 리드가 발생할 수 있음. 트랜잭션 A가 특정 조건을 만족하는 모든 레코드를 조회하는 쿼리를 실행함. 동시에 트랜잭션 B가 같은 조건을 만족하는 새로운 레코드를 삽입함. 트랜잭션 A의 결과는 트랜잭션 B가 수행한 새로운 레코드가 반영된 상태가 되어 원래 의도한 결과가 아니게 됨.

### 3. **REPEATABLE READ (반복 가능한 읽기)**:
   - 트랜잭션 시작 시점의 데이터 상태를 유지.
   - 트랜잭션이 완료될 때까지 다른 트랜잭션이 해당 데이터를 변경할 수 없음(팬텀 리드 방지).
   - 예시: 사용자 A가 조회한 특정 범위의 데이터는 사용자 A의 트랜잭션이 완료될 때까지 다른 사용자가 새로운 데이터를 그 범위에 추가할 수 없음.

### 4. **SERIALIZABLE (직렬화 가능)**:
   - 가장 높은 격리 수준.
   - 트랜잭션을 순차적으로 처리하여 완전한 격리를 보장.
   - 예시: 사용자 A가 특정 데이터를 조회하는 동안, 해당 데이터에 대한 다른 모든 트랜잭션은 대기 상태가 됨.
   - 동시성이 감소됨.

### 격리 수준의 활용

- 데이터베이스에서 격리 수준을 적절히 설정하면, 동시성과 데이터 무결성 사이의 균형을 맞출 수 있다.
- 낮은 격리 수준은 높은 동시성을 제공하지만, 데이터 무결성 문제(더티 리드, 팬텀 리드)를 발생시킬 수 있다.
- 높은 격리 수준은 데이터 무결성을 보장하지만, 동시성이 감소할 수 있다.

### 더티 리드
### 팬텀 리드